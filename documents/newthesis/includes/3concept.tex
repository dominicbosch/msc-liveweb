
% Rahmenbedingungen
% Vorzuege
% Notwendigkeiten
% Architektur
% Schema: Zeit / Verteiltheit
% Steckbrief von Prototyp erstellen
 % was muss man ausfÃ¼llen um UC zu erstellen?
% why are we now suddenly responsive? we loosened up certain things
% point out where events happen, triggered and received



\chapter{Conceptual Model for Reactive Information Systems and their Services}
The challenges and opportunities arising with the growth of the Web in terms of volume and complexity inspired our research towards the reactive Web.
Therefore our starting point were the studies of related work in the context of reactivity on the Web, event composition and programmability of the Web.
In the last chapter, we pointed out how they received a lot of attention and provide powerful tools to orchestrate the rapidly growing Web.
By combining existing research in these fields we developped a conceptual model, which allows to impose smart reactivity to any \textrm{\gls{infospace}}.
Even though our initial set of \textrm{\glspl{infospace}} was thought to consist of \textrm{\glspl{webresource}}, we believe in the applicability of our model to any \textrm{\gls{infosystem}} whose \textrm{\gls{infospace}} can be accessed and altered over interfaces, i.e. services.
Thus we introduce our conceptual model for reactive \textrm{\glspl{infosystem}} and their services in this chapter.

\begin{figure}[!ht]
  \centering
  \includegraphics[width=0.8\textwidth]{figures/IS_InformationSpace}
  \caption{Reactivity imposed on Information Systems and their Information Space over Services}
  \label{fig:IS_InformationSpace}
\end{figure}
Data changes within an \textrm{\gls{infosystem}} can be detected and imposed from the outside, if proper interfaces exist, the services.
We model the detection of data changes as events, and the inflicting of such changes as actions, as shown in Figure \ref{fig:IS_InformationSpace}.
Through this we are able to introduce an event-based model that is capable to detect events and react on behalf of them by imposing actions on the same or another \textrm{\gls{infospace}}.
A more precise distinction of the important modules for such a reactivity imposing entity is displayed in Figure \ref{fig:Standard-Model-Template}, and we will introduce each module in this chapter.
\begin{figure}[!ht]
  \centering
  \includegraphics[width=0.9\textwidth]{figures/Standard-Model-Template}
  \caption{Conceptual Model for Reactive Information Systems and their Services}
  \label{fig:Standard-Model-Template}
\end{figure}



\section{From Physical Events to Digital Events}
We introduced the \textrm{\gls{webofthings}} in the last chapter, where smart devices gain access to the Web.
It is based on the \textrm{Internet of Things} which mostly dealt with the incorporation of sensor networks into the Internet on the network level.
Such sensors bring the physical world directly into the digital world.
This transfer pictures an important difference between physical and digital events.
In physics, and in particular relativity, an event indicates a physical situation or occurrence, located at a specific point in space and time.
While physical events correspond to a physical situation which is located at a specific point in space and time, digital events primarily consist of implicit parameters, i.e. a name and occurrence time.
These digital events can be anywhere within \textrm{\glspl{infosystem}} at any point in time and thus their actual location differs most certainly from its occurrence location.
But digital events also have explicit parameters which correspond to all available information about the event.
As soon as events are transfered into the digital world the afore mentioned location information turns into explicit parameters.
Therefore wherever a digital event is, it has a name, an occurence time and most likely some explicit parameters attached to it.
If the digital event is of a physical nature, it has a physical location, if it is of a digital nature it is likely associated with a digital origin.
Since in our model events are changes in data, they can be virtually anything, e.g. measurements, changes on a static webpage, changes of the object behind a \textrm{\gls{webservice}} or also a login attempt.
% TODO TABELLE Ort/Kultur(fussball/Apple, weltweit)/Saisonal(kalender)/Internet (ortlos, github)
% ceremony
% competition
% meeting
% disaster
% event horizon
% extinction event
% festival
% grouped events
% happening
% impact evetn
% media event
% mental event
% news
% party
% phenomenon
% sporting event
% synchronization


\section{Capturing Events from Information Systems}
The optimal case for an event-driven system which requires events from an \textrm{\gls{infosystem}} is, that events are triggered within the \textrm{\glspl{infosystem}} and then immediately communicated to interested external systems such as our envisioned reactivity imposing system.
But our research has shown that such \textrm{\glspl{infosystem}} are often passive and rarely provide ways for external systems to announce interest in changes of their data.
For example in the context of \textrm{\glspl{webresource}}, many of them provide service access to data but do not actively communicate changes to interested parties.
This is where the upcoming concept of \textrm{\glspl{webhook}} comes into play.
Only through them we are able to provide nearly real-time reactivity without risking huge costs of continuously polling for changes over all \textrm{\glspl{infospace}}.
We envision a future where the whole Web is event driven and events are directed to any system, which is interested in them.
This would be the optimal case for effective real-time notifications and thus reactivity on the Web.
But still we need to incorporate polling for changes into our model, in order to cope for the widely spread passiveness of \textrm{\glspl{infosystem}} which is likely to never thoroughly vanish.
Wherever an \textrm{\gls{infosystem}} is not capable to provide events over services, we can use all the accessible data and detect changes in it, and as a result model them as events in order to feed them into our model.
In our model the polling for changes is incorporated in the \textrm{Event Trigger} modules.
Those are flexible modules that have the proper tools to access any \textrm{\gls{infosystem}} service and therefore its \textrm{\gls{infospace}} and are capable of identifying changes in the data.
For example the \textrm{\gls{www}}, as envisioned by Tim Berners-Lee\cite{DBLP:journals/en/Berners-LeeCGP92}, is an information universe of interlinked documents, that a user can browse through.
Through our model, we can pull changes in the data on the \textrm{\gls{www}}, i.e. document changes, and turn them into events.
These events which are derived from changes in the data of \textrm{\gls{infosystem}} are then fed into the \textrm{Event Listener}.
The \textrm{Event Listener} also receives events directly from he \textrm{\glspl{infosystem}} which are capable to communicate events to external systems.
It queues all events and forwards them to the \textrm{Event Composition} module and the \textrm{Rule Engine} whenever they are ready.



\section{Event Pattern Detection}
Traditional \textrm{\acrshort{eca}} systems only react on single events, but this might often not be enough to detect meaningful situations.
Events are initially primitive that occurr at a point in time (e.g. a press down mouse button event).
When they are composed (e.g. the latter event with a release mouse button event), they turn into a composite event which is more complex and has a duration.
This is why there is a trend towards the detection of complex event patterns, as we have pointed out in the last chapter.
\textrm{\acrshort{cep}} could be incorporated into the rules of the \textrm{Rule Engine}, which then reacts on event patterns, but this opposes our vision of a successively growing complexity of composite events that are defined on top of each other and fed back into the \textrm{Event Listener}.
Thus in our model an \textrm{Event Composition} module composes events into more complex events according to \textrm{\acrshort{ced}} definitions.
It is beyond the scope of this thesis to dive into this complex matter, but since it is a very active research field, it has seen interesting studies\cite{akdere2008plan}\cite{2004_1265833} and outcomes\footnote{such as http://drools.jboss.org/drools-fusion.html} that could be incorporated into our model.
Such an event composing service systems works loosely coupled an could be realized by any suitable system, as described in \cite{robins2010complex}.



\section{Impose Reactivity to the Web Information Space}

 % conditions as web queries can be solved through event composition, aight?
% TODO Condition evaluation on other resources? i.e. make a request to a remote site and evaluate it? -> also achievable through composite events
% show rule engines, alsoo CEP, describe event composition through templates and why we don't do it


% TODO Imposing Acitons
% since we model changes in the data of an information space as events and actions, depending on wheter it is a read or wrtie action, we can impose reactivity to information systems.
% Eventually theres a device included in that information system which allows us to control it, e.g. the heating of a house or a cooling device for a server.

% TODO conditions with examples


% RL <-> ECA
% TODO figure: ECA Schema
% TODO Figure: ECA in the distributed environemnt
% TODO figure: Rules (unions / objects / Rueckkoppelungen )




% % TODO Actions
% \index{Actions}

% % TODO engine
% \index{Engine}


% \section{Event Condition Action (ECA) Model in the Web}
In the last section we showed how mashups create additional value for the Web by combining several Web API's.
But it turned out, that such mashups are closed systems, which often only allow little degree of parametrization.
To get past such limitations and define a conceptual model for reactive Web systems, it is necessary to define a 

Almost all existing \textrm{\acrshort{eca}} systems act on local data which opposes our vision of orchestrating \textrm{\glspl{infosystem}}.
This does only add reactivity to these systems and not to the Web per se.
Such systems are merely event sinks which add fairly any value to the Web, except for the individual users and the system itself.



\subsection{Rule Language for Reactive Information Systems}
Because of the heterogenous nature of the Web actions need to be abstracted
as long as we do not limit ourselves e.g for RESTful access to services



% % Regelimplementierungssprache
% \subsection{Conceptual Rule Language}
% Describe conceptual rule language
% ON (existing categories)
% IF (condition boundaries)
% DO (call to existing action modules with parameters)

% a lot possible, but dangerous.

% \begin{Verbatim}[fontsize=\small,commandchars=\\\{\}]
% \PY{k}{on} \PY{n}{mail}
% \PY{k}{if} \PY{n}{sender}\PY{o}{=}\PY{l+s+ss}{\PYZdq{}sender@mail.com\PYZdq{}}
% \PY{k}{do} \PY{n}{webapi}\PY{o}{\PYZhy{}}\PY{o}{\PYZgt{}}\PY{l+s+s2}{newcontent}\PY{p}{(}\PY{n}{subject}\PY{p}{)}
% \end{Verbatim}

% % TODO Define language with regular expression 
% % Programming language syntax is usually defined using a combination of regular expressions (for lexical structure) and BackusâNaur Form (for grammatical structure). Below is a simple grammar, based on Lisp:
% % expression ::= atom | list
% % atom       ::= number | symbol
% % number     ::= [+-]?['0'-'9']+
% % symbol     ::= ['A'-'Z''a'-'z'].*
% % list       ::= '(' expression* ')'
% \begin{lstlisting}[language=OwnRule,caption=Conceptual ECA Rule Language Syntax]
% expression  ::= 'on ' event ' if ' conditions ' do ' actions
% event       ::= symbol.*(' -> ' symbol.*)
% conditions  ::= 
% actions     ::= symbol*('('selector*')')
% symbol      ::= [A-Za-z0-9_-]+
% selector    ::= [#\{(symbol*?)\}]
% \end{lstlisting


% TODO Action Dispatcher
% Actions
% \begin{itemize}
%   \item Event Redirection
%   \item Event Enrichment
%   \item WebApp Actions
% \end{itemize}





% EARTH QUAKE example

% Different points on earth's surface would feel the earthquake, which originates from the same epicentre, at a different point in time with a different intensity.
% A Web event model of an earthquake would consist of a large number of identical \textrm{\textbf{ground-shake}} events that occur at different points in time and places.
% Therefore they would hold different spatial location informations and intensities.
% These events can be thought of as emitted into the Web by a seismometer sitting at the corresponding location.
% \begin{figure}[!ht]
%   \centering
%   \includegraphics[width=0.6\textwidth]{figures/Earthquake}
%   \caption{Web Event Model of an Earthquake}
%   \label{fig:Earthquake}
% \end{figure}
% Within the Web, events lose their tight coupling to locations and retain only a time component.
% The event instances keep this information as descriptive metadata.
% A reactive system such as we envision it, could detect these \textrm{\textbf{ground-shake}} events and react on behalf of each one of them.
% Because of the Web's latency these events do most certainly not arrive at systems within the Web in the original order, in which they were triggered.
% They also do most likely not arrive in the exact same order for all systems.
% This leaves us with time as the only important factor left, to distinguish events from each other in the first place.
% To get an earthquake event out of all these ground shaking informations floating through the Web, somebody would need a reactive system that detects these events and assembles them into one earthquake event, together with a computed epicentre and magnitude.
% Such a system (we call it \textrm{\textbf{earthquake-tracker}}) would own an earthquake model that allows it to decide whether a \textrm{\textbf{ground-shake}} event belongs to one physical earthquake or to another one, depending on its spatial location information and the intensity at that point in time.
% It could then emit a more complex \textrm{\textbf{earthquake}} event (with epicentre and magnitude) that allows other systems to interpret this physical event and react on behalf of it.

% Let's take another system that reacts on a physical earthquake.
% It is now left with a multitude of different options on how to react.
% It could only react on the \textrm{\textbf{earthquake}} event which is coming from the system above (\textrm{\textbf{earthquake-tracker}}) that applies its earthquake model to the incoming \textrm{\textbf{ground-shake}} events.
% But how long will it take for this system to deploy its \textrm{\textbf{earthquake}} event?
% Eventually it waits for one round-trip of a seismic wave around the world, which takes approximately half an hour.
% What if it waits two or three round-trip times in order to collect more accurate data?
% And what if our new system wants to react as fast as possible in order to warn people all around the world.
% It would then need to react on a small subset of the \textrm{\textbf{ground-shake}} events in order to quickly identify a real earthquake and take measurements, e.g. immediately send out text messages to people, or to deploy yet another ( this time \textrm{\textbf{earthquake-alert}}) event into the Web's \textrm{\gls{infospace}}.
% This relatively simple example discloses the complex nature of event-driven systems, but also their high flexibility and fine grained tuning possibilities.
