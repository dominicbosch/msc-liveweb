\documentclass[x11names]{beamer}
\usepackage{beamerthemesplit}
\usepackage{lmodern}
\usepackage{fancyvrb}
\usepackage{color}
\usepackage[ascii]{inputenc}
\usepackage{graphicx}

\setbeamertemplate{navigation symbols}{}%remove navigation symbols
\setbeamercolor{eecks} {bg=Ivory3, fg=RoyalBlue3}
\setbeamercolor{eecks2}{bg=Ivory1, fg=RoyalBlue4}

\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother



\title{CS212 Webtechnologien: Node.js}
\author{Dominic Bosch} 
\date{\today} 

\begin{document}

\frame[plain]{
\begin{center}
\begin{figure}
\includegraphics[width=0.5\linewidth]{nodejs-biglogo}
\end{figure}
\end{center}
\titlepage} 
\frame{\tableofcontents} 

\section{Introduction}
\frame{
\textbf{What defines Node.js?}
\begin{itemize}
	\item<1-> Software Platform
  \item<2-> Applications written in JavaScript
  \item<3-> ''Server-side''
  \item<4-> Scalable Networking
  \item<5-> Asynchronous events, Non-blocking I/O
	\item<6-> Built-in \& Package Manager Modules
\end{itemize}
}



\section{Event-Driven Design}


\subsection{Blocking \& Non-Blocking I/O}

\begin{frame}[fragile,t]
\textbf{Blocking \& Non-Blocking I/O Examples:}
\vspace*{\baselineskip}
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Blocking I/O:}
\vspace*{0.5\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
  \PY{k+kd}{var} \PY{n+nx}{fs} \PY{o}{=} \PY{n+nx}{require}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}fs\PYZsq{}} \PY{p}{)}\PY{p}{;}
  \PY{k}{try} \PY{p}{\PYZob{}}
    \PY{k+kd}{var} \PY{n+nx}{data} \PY{o}{=} \PY{n+nx}{fs}\PY{p}{.}\PY{n+nx}{readFileSync}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}./cryptico.js\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}utf8\PYZsq{}} \PY{p}{)}\PY{p}{;}
  \PY{p}{\PYZcb{}} \PY{k}{catch} \PY{p}{(} \PY{n+nx}{err} \PY{p}{)} \PY{p}{\PYZob{}} \PY{c+cm}{/* Error Handler */} \PY{p}{\PYZcb{}}
\end{Verbatim}
\vspace*{0.25\baselineskip}
\end{beamerboxesrounded}

\vspace*{0.5\baselineskip}

\begin{onlyenv}<2->
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Non-Blocking I/O:}
\vspace*{0.5\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
  \PY{k+kd}{var} \PY{n+nx}{fs} \PY{o}{=} \PY{n+nx}{require}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}fs\PYZsq{}} \PY{p}{)}\PY{p}{;}
  \PY{k+kd}{var} \PY{n+nx}{fAsyncCalled} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{err}\PY{p}{,} \PY{n+nx}{data} \PY{p}{)} \PY{p}{\PYZob{}}
    \PY{k}{if}\PY{p}{(} \PY{n+nx}{err} \PY{p}{)}\PY{p}{\PYZob{}} \PY{c+cm}{/* Error Handler */} \PY{p}{\PYZcb{}}
  \PY{p}{\PYZcb{}}\PY{p}{;}
  \PY{n+nx}{fs}\PY{p}{.}\PY{n+nx}{readFile}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}./cryptico.js\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}utf8\PYZsq{}}\PY{p}{,} \PY{n+nx}{fAsyncCalled} \PY{p}{)}\PY{p}{;}
\end{Verbatim}
\vspace*{0.25\baselineskip}
\end{beamerboxesrounded}
\end{onlyenv}
\end{frame}


\subsection{Asynchronous Events}

\frame{
\textbf{Asynchronous Events}
\begin{itemize}
  \item<1-> Allow non-blocking, ...
  \item<2-> ... scalable application design
  \item<3-> Time awareness is important
  \item<4-> Global variables almost extinguished
\end{itemize}
}


\begin{frame}[t,fragile]
\textbf{Well known for Browser (DOM) Events:\vspace*{\baselineskip}}
\begin{onlyenv}<2->
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Onload Event Listener (Browser)}
\vspace*{\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
\PY{c+cp}{\PYZlt{}!doctype html\PYZgt{}}
\PY{n+nt}{\PYZlt{}html}\PY{n+nt}{\PYZgt{}}
  \PY{n+nt}{\PYZlt{}head}\PY{n+nt}{\PYZgt{}}\PY{n+nt}{\PYZlt{}/head\PYZgt{}}
  \PY{n+nt}{\PYZlt{}body}\PY{n+nt}{\PYZgt{}}
    \PY{n+nt}{\PYZlt{}script}\PY{n+nt}{\PYZgt{}}
      \PY{k+kd}{var} \PY{n+nx}{triggerAlert} \PY{o}{=} \PY{k+kd}{function} \PY{p}{(}\PY{p}{)} \PY{p}{\PYZob{}}
        \PY{n+nb}{window}\PY{p}{.}\PY{n+nx}{alert}\PY{p}{(} \PY{l+s+s2}{\PYZdq{}Document loaded\PYZdq{}} \PY{p}{)}\PY{p}{;}
      \PY{p}{\PYZcb{}}\PY{p}{;}
      \PY{n+nb}{window}\PY{p}{.}\PY{n+nx}{addEventListener}\PY{p}{(} \PY{l+s+s2}{\PYZdq{}onload\PYZdq{}}\PY{p}{,} \PY{n+nx}{triggerAlert} \PY{p}{)}\PY{p}{;}
    \PY{n+nt}{\PYZlt{}/script\PYZgt{}}
  \PY{n+nt}{\PYZlt{}/body\PYZgt{}}
\PY{n+nt}{\PYZlt{}/html\PYZgt{}}
\end{Verbatim}
\vspace*{0.5\baselineskip}
\end{beamerboxesrounded}
\end{onlyenv}
\end{frame}


\begin{frame}[fragile]
\textbf{Node.js Example:\vspace*{\baselineskip}}
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Login Handler}
\vspace*{\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
\PY{k+kd}{var} \PY{n+nx}{express} \PY{o}{=} \PY{n+nx}{require}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}express\PYZsq{}} \PY{p}{)}\PY{p}{,} \PY{c+c1}{// Load Server Module}
  \PY{n+nx}{app} \PY{o}{=} \PY{n+nx}{express}\PY{p}{(}\PY{p}{)}\PY{p}{;}

\PY{k+kd}{var} \PY{n+nx}{handleLogin} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{req}\PY{p}{,} \PY{n+nx}{resp} \PY{p}{)} \PY{p}{\PYZob{}}
  \PY{k+kd}{var} \PY{n+nx}{body} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}\PYZsq{}}\PY{p}{;}
  \PY{n+nx}{req}\PY{p}{.}\PY{n+nx}{on}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}data\PYZsq{}}\PY{p}{,} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{data} \PY{p}{)} \PY{p}{\PYZob{}} \PY{n+nx}{body} \PY{o}{+=} \PY{n+nx}{data}\PY{p}{;} \PY{p}{\PYZcb{}} \PY{p}{)}\PY{p}{;}
  \PY{n+nx}{req}\PY{p}{.}\PY{n+nx}{on}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}end\PYZsq{}}\PY{p}{,} \PY{k+kd}{function}\PY{p}{(}\PY{p}{)} \PY{p}{\PYZob{}}
     \PY{c+cm}{/* Process the request stored in body */}
  \PY{p}{\PYZcb{}}\PY{p}{)}\PY{p}{;}
\PY{p}{\PYZcb{}}

\PY{n+nx}{app}\PY{p}{.}\PY{n+nx}{post}\PY{p}{(} \PY{l+s+s1}{\PYZsq{}/login\PYZsq{}}\PY{p}{,} \PY{n+nx}{handleLogin} \PY{p}{)}\PY{p}{;}
\PY{n+nx}{app}\PY{p}{.}\PY{n+nx}{listen}\PY{p}{(} \PY{l+m+mi}{8111} \PY{p}{)}\PY{p}{;} \PY{c+c1}{// Start Listening on port 8111}
\end{Verbatim}
\vspace*{0.5\baselineskip}
\end{beamerboxesrounded}
\end{frame}


\subsection{Time Awareness}

\frame{

\textbf{Importance of time awareness:}\\
\vspace*{\baselineskip}
\textit{Declare functions \textbf{before} you \textbf{actually} assign them to an event that happens in the \textbf{future}!}
}

\frame[containsverbatim]{
\textbf{Why is this doing the wrong thing?\vspace*{\baselineskip}}
  % for( var i = 0; i < 100; i++ ) {
  %   setTimeout( function() {
  %     console.log(i);
  %   }, 3000);
  % }
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Print 0..99 in 3 seconds}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
  \PY{k}{for}\PY{p}{(} \PY{k+kd}{var} \PY{n+nx}{i} \PY{o}{=} \PY{l+m+mi}{0}\PY{p}{;} \PY{n+nx}{i} \PY{o}{\PYZlt{}} \PY{l+m+mi}{100}\PY{p}{;} \PY{n+nx}{i}\PY{o}{++} \PY{p}{)} \PY{p}{\PYZob{}}
    \PY{n+nx}{setTimeout}\PY{p}{(} \PY{k+kd}{function}\PY{p}{(}\PY{p}{)} \PY{p}{\PYZob{}}
      \PY{n+nx}{console}\PY{p}{.}\PY{n+nx}{log}\PY{p}{(}\PY{n+nx}{i}\PY{p}{)}\PY{p}{;}
    \PY{p}{\PYZcb{}}\PY{p}{,} \PY{l+m+mi}{3000}\PY{p}{)}\PY{p}{;}
  \PY{p}{\PYZcb{}}
\end{Verbatim}
\vspace*{0.5\baselineskip}
\end{beamerboxesrounded}
}

\frame[containsverbatim]{
\textbf{Solution:\vspace*{\baselineskip}}
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Print 0..99 in 3 seconds}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
  \PY{k+kd}{var} \PY{n+nx}{fDelayed} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(}\PY{n+nx}{id}\PY{p}{)} \PY{p}{\PYZob{}} \PY{c+c1}{// Declare a function...}
    \PY{k}{return} \PY{k+kd}{function}\PY{p}{(}\PY{p}{)} \PY{p}{\PYZob{}} \PY{c+c1}{// ( \PYZlt{}\PYZhy{}\PYZhy{} Anonymous function )}
      \PY{n+nx}{console}\PY{p}{.}\PY{n+nx}{log}\PY{p}{(}\PY{n+nx}{id}\PY{p}{)}\PY{p}{;}
    \PY{p}{\PYZcb{}}\PY{p}{;}
  \PY{p}{\PYZcb{}}\PY{p}{;}
  \PY{k}{for}\PY{p}{(} \PY{k+kd}{var} \PY{n+nx}{i} \PY{o}{=} \PY{l+m+mi}{0}\PY{p}{;} \PY{n+nx}{i} \PY{o}{\PYZlt{}} \PY{l+m+mi}{100}\PY{p}{;} \PY{n+nx}{i}\PY{o}{++} \PY{p}{)} \PY{p}{\PYZob{}}
    \PY{c+c1}{// ... before you assign it to an event happening in the future:}
    \PY{n+nx}{setTimeout}\PY{p}{(} \PY{n+nx}{fDelayed}\PY{p}{(}\PY{n+nx}{i}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{3000}\PY{p}{)}\PY{p}{;}
  \PY{p}{\PYZcb{}}
\end{Verbatim}
\vspace*{0.5\baselineskip}
\end{beamerboxesrounded}\\
  % var fDelayed = function(id) { // Declare a function...
  %   return function() { // ( <-- Anonymous function )
  %     console.log(id);
  %   };
  % };
  % for( var i = 0; i < 100; i++ ) {
  %   // ... before you assign it to an event happening in the future:
  %   setTimeout( fDelayed(i), 3000);
  % }
\vspace{0.5\baselineskip}
  Registers \path{i} by value and not by reference in the anonyomous function which is returned on the first function call of \path{fDelayed(i)}.
}


\frame[containsverbatim]{
\textbf{Real Life example:}	
% function fetchUserObjectsAsync( arrNames, cbAnswer ){
%   var semaphore = arrNames.length, // Number of objects to fetch
%   objUsers = {},
%   fGetUserAsync = function( name, cbLocal ){
%     db.getUser(name, cbLocal);    // fork a token for the DB request
%   },
%   fJoin = function( uName ) {     // register username by value
%     return function( err, obj ) { // Join the forked tokens
%       --semaphore                 // Decrement the semaphore
%       // Store the object for the user:
%       if( !err && obj ) objUsers[ uName ] = obj;
%       if( semaphore === 0 ){      // If all DB requests returned
%         cbAnswer( null, objReplies ); // answer the overall request
%       }
%     }
%   }; // <-- Until here only var declarations! Now the function code:
%   for( var name in arrNames ){ // fetch object for each username
%     fGetUserAsync( user, fJoin( name ));
%   }
% }
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,
shadow=true]{Fetch User Objects from Database}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
\PY{k+kd}{function} \PY{n+nx}{fetchUserObjectsAsync}\PY{p}{(} \PY{n+nx}{arrNames}\PY{p}{,} \PY{n+nx}{cbAnswer} \PY{p}{)}\PY{p}{\PYZob{}}
  \PY{k+kd}{var} \PY{n+nx}{semaphore} \PY{o}{=} \PY{n+nx}{arrNames}\PY{p}{.}\PY{n+nx}{length}\PY{p}{,} \PY{c+c1}{// Number of objects to fetch}
  \PY{n+nx}{objUsers} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}\PY{p}{,}
  \PY{n+nx}{fGetUserAsync} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{name}\PY{p}{,} \PY{n+nx}{cbLocal} \PY{p}{)}\PY{p}{\PYZob{}}
    \PY{n+nx}{db}\PY{p}{.}\PY{n+nx}{getUser}\PY{p}{(}\PY{n+nx}{name}\PY{p}{,} \PY{n+nx}{cbLocal}\PY{p}{)}\PY{p}{;}    \PY{c+c1}{// fork a token for the DB request}
  \PY{p}{\PYZcb{}}\PY{p}{,}
  \PY{n+nx}{fJoin} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{uName} \PY{p}{)} \PY{p}{\PYZob{}}     \PY{c+c1}{// register username by value}
    \PY{k}{return} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{err}\PY{p}{,} \PY{n+nx}{obj} \PY{p}{)} \PY{p}{\PYZob{}} \PY{c+c1}{// Join the forked tokens}
      \PY{o}{\PYZhy{}\PYZhy{}}\PY{n+nx}{semaphore}                 \PY{c+c1}{// Decrement the semaphore}
      \PY{c+c1}{// Store the object for the user:}
      \PY{k}{if}\PY{p}{(} \PY{o}{!}\PY{n+nx}{err} \PY{o}{\PYZam{}\PYZam{}} \PY{n+nx}{obj} \PY{p}{)} \PY{n+nx}{objUsers}\PY{p}{[} \PY{n+nx}{uName} \PY{p}{]} \PY{o}{=} \PY{n+nx}{obj}\PY{p}{;}
      \PY{k}{if}\PY{p}{(} \PY{n+nx}{semaphore} \PY{o}{===} \PY{l+m+mi}{0} \PY{p}{)}\PY{p}{\PYZob{}}      \PY{c+c1}{// If all DB requests returned}
        \PY{n+nx}{cbAnswer}\PY{p}{(} \PY{k+kc}{null}\PY{p}{,} \PY{n+nx}{objReplies} \PY{p}{)}\PY{p}{;} \PY{c+c1}{// answer the overall request}
      \PY{p}{\PYZcb{}}
    \PY{p}{\PYZcb{}}
  \PY{p}{\PYZcb{}}\PY{p}{;} \PY{c+c1}{// \PYZlt{}\PYZhy{}\PYZhy{} Until here only var declarations! Now the function code:}
  \PY{k}{for}\PY{p}{(} \PY{k+kd}{var} \PY{n+nx}{name} \PY{k}{in} \PY{n+nx}{arrNames} \PY{p}{)}\PY{p}{\PYZob{}} \PY{c+c1}{// fetch object for each username}
    \PY{n+nx}{fGetUserAsync}\PY{p}{(} \PY{n+nx}{user}\PY{p}{,} \PY{n+nx}{fJoin}\PY{p}{(} \PY{n+nx}{name} \PY{p}{)}\PY{p}{)}\PY{p}{;}
  \PY{p}{\PYZcb{}}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\end{beamerboxesrounded}
}



\section{Node.js Apps are the glue between Modules}
\frame{
Node.js is all about writing, loading and glueing together powerful modules!\\
\vspace{0.5\baselineskip}
\textbf{Ways to load modules:} 
\begin{itemize}
	\item<1-> Built-in
	\item<2-> Node Packet Manager
	\item<3-> Your Project Modules
\end{itemize}
\vspace{0.5\baselineskip}
\uncover<4>{
\textbf{  $\Rightarrow$ Modules are cached!}
}
}


\subsection{Built-in}
\begin{frame}
\textbf{Built-in Modules:}
\begin{itemize}
  \item<1-> Identify the module:\\
    \qquad\path{http://nodejs.org/api/}
  \item<2-> Load the module:\\
    \qquad\texttt{var fs = require( 'fs' );}
\end{itemize}
\begin{center}
\begin{figure}
\includegraphics[width=0.75\linewidth]{nodejs-api}
\end{figure}
\end{center}
\end{frame}

\subsection{Node Packet Manager}
\frame{
\textbf{Node Packaged Modules (NPM):}
\begin{itemize}
  \item<1-> Identify the module: \path{https://www.npmjs.org/}
  \item<2-> Install the module in one of the following ways:
  \begin{itemize}
    \item<3-> Globally for the whole system:\\
      \texttt{npm install -g express}
    \item<4-> Locally into the project folder:\\
      \texttt{npm install express}
    \item<5-> \textbf{Through configuration file}
  \end{itemize}
  \item<6-> Load the module via:\\
    \texttt{var express = require( 'express' );}
\end{itemize}
\begin{center}
\begin{figure}
\includegraphics[width=0.7\linewidth]{npmpage}
\end{figure}
\end{center}
}

\frame{
\textbf{Shortcomings of global and local installation:\\}
\qquad\texttt{npm install [-g] express}
\vspace{0.5\baselineskip}
\begin{itemize}
  \item<2-> Installs latest version\\
    $\rightarrow$ \textit{What if you need an older version?}
  \item<3-> Each module needs to be installed/removed seperately\\
    $\rightarrow$ \textit{Portability of large projects?}
  \item<4-> Collaboration not as easy as it could be
\end{itemize}
\uncover<5>{
$\Rightarrow$ \textbf{Load NPM module through configuration file}
}
}

% \frame{
% \textbf{NPM Installation via Configuration File:}\\
% Place configuration file in project folder

\begin{frame}[t,fragile]
\textbf{NPM management through Configuration File:\\
\vspace*{0.25\baselineskip}}
\begin{itemize}
  \item<2-> Place package.json in project folder
  \item<3-> \texttt{npm install}
\end{itemize}
\begin{onlyenv}<2->
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,shadow=true]{package.json}
\vspace*{0.5\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
  \PY{p}{\PYZob{}}
    \PY{l+s+s2}{\PYZdq{}name\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}my\PYZhy{}module\PYZdq{}}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}author\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}Dominic Bosch\PYZdq{}}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}description\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}My Module\PYZdq{}}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}version\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}0.1.0\PYZdq{}}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}private\PYZdq{}}\PY{o}{:} \PY{k+kc}{true}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}repository\PYZdq{}}\PY{o}{:} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}\PY{p}{,}
    \PY{l+s+s2}{\PYZdq{}dependencies\PYZdq{}}\PY{o}{:} \PY{p}{\PYZob{}}
      \PY{l+s+s2}{\PYZdq{}express\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}3.4.8\PYZdq{}}\PY{p}{,}
      \PY{l+s+s2}{\PYZdq{}groc\PYZdq{}}\PY{o}{:} \PY{l+s+s2}{\PYZdq{}0.6.1\PYZdq{}}
    \PY{p}{\PYZcb{}}
  \PY{p}{\PYZcb{}}
\end{Verbatim}
\vspace*{0.25\baselineskip}
\end{beamerboxesrounded}
\end{onlyenv}
\end{frame}


\subsection{Your Project Modules}
\begin{frame}[t,fragile]
\begin{itemize}
  \item<1-> You will write more than one module in your project
  \item<2-> Attach to \textbf{\texttt{exports}} to be visible from outside
  \item<3-> Load Modules:\\
  \qquad\texttt{var oe = require( './other-example' )}
\end{itemize}
\begin{onlyenv}<2->
\begin{beamerboxesrounded}[lower=eecks2,upper=eecks,shadow=true]{example-module.js}
\vspace*{0.5\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize,commandchars=\\\{\}]
\PY{k+kd}{var} \PY{n+nx}{fs} \PY{o}{=} \PY{n+nx}{require}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}fs\PYZsq{}}\PY{p}{)}\PY{p}{,}
  \PY{n+nx}{oe} \PY{o}{=} \PY{n+nx}{require}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}./other\PYZhy{}example\PYZsq{}}\PY{p}{)}\PY{p}{;}

\PY{n+nx}{exports}\PY{p}{.}\PY{n+nx}{loadFile} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{path} \PY{p}{)} \PY{p}{\PYZob{}}
  \PY{n+nx}{oe}\PY{p}{.}\PY{n+nx}{inform}\PY{p}{(} \PY{n+nx}{path} \PY{p}{)}\PY{p}{;}
  \PY{k}{try} \PY{p}{\PYZob{}}
    \PY{k}{return} \PY{n+nx}{JSON}\PY{p}{.}\PY{n+nx}{parse}\PY{p}{(} \PY{n+nx}{fs}\PY{p}{.}\PY{n+nx}{readFileSync}\PY{p}{(} \PY{n+nx}{path} \PY{p}{)} \PY{p}{)}\PY{p}{;}
  \PY{p}{\PYZcb{}} \PY{k}{catch} \PY{p}{(}\PY{n+nx}{e}\PY{p}{)} \PY{p}{\PYZob{}} \PY{c+cm}{/* [Error Handler] */} \PY{p}{\PYZcb{}}
\PY{p}{\PYZcb{}}
\end{Verbatim}
\vspace*{0.25\baselineskip}
\end{beamerboxesrounded}
\end{onlyenv}
\end{frame}


\subsection{Node.js in my Master Thesis Project}
\begin{frame}
\textbf{Advantages of Node.js}
\begin{itemize}
  \item<1-> Non-Blocking ...
  \item<2-> ... Asynchronous $\Rightarrow$ Scales!
  \item<3-> One Language for a distributed system
  \item<4-> Simple communication between remote systems
  \item<5-> Fast deployment, \textit{( almost )} wherever you want 

\end{itemize}
\end{frame}



\begin{frame}
\textbf{NPM Modules used:}
\begin{itemize}
  \item<1-> \textbf{CoffeeScript:} Compiler
  \item<2-> \textbf{Optimist:} Command line arguments 
  \item<3-> \textbf{Bunyan:} Logging
  \item<4-> \textbf{Needle:} HTTP Requests
  \item<5-> \textbf{Express:} Webserver
  \item<6-> \textbf{CryptoJS / Cryptico:} Encryption / Hashing
  \item<7-> \textbf{Redis:} DB Interface
  \item<8-> \textbf{JS-select:} JSON node selector
  \item<9-> \textbf{Mustache:} HTML templates
  \item<10-> \textbf{Groc:} Create code documentation
  \item<11-> \textbf{Nodeunit:} Unit Testing
\end{itemize}
\end{frame}

\begin{frame}
\begin{center}
\textbf{Thank You!\\
\vspace*{0.5\baselineskip}
... and have fun developping your own Node.js modules!}
\end{center}
\end{frame}

\end{document}
