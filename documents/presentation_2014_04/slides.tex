\documentclass{beamer}
\usepackage{beamerthemesplit}
\usepackage{lmodern}
\usepackage{fancyvrb}

\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother



\title{Node.js}   
\author{Dominic Bosch} 
\date{\today} 

\begin{document}

\frame{\titlepage} 
\frame{\tableofcontents} 


\section{What is it}

\subsection{General Attributes}
\frame{
\begin{itemize}
	\item<1-> Software Platform
	\item<2-> Scalable Networking applications
	\item<3-> Asynchronous events, Non-blocking I/O
	\item<4-> Applications written in JavaScript
	\item<5-> Many built-in libraries
	\item<6-> Custom libraries from Package Manager NPM
\end{itemize}
}

\section{The callback paradigm}

\begin{frame}[fragile,t]
\vspace*{\baselineskip}
\begin{onlyenv}<1->
\textbf{Synchronous functions:}
\begin{Verbatim}[fontsize=\scriptsize]
  var fs = require('fs');
  try {
    var data = fs.readFileSync('./cryptico.js','utf8');
  } catch (err) {

  }
\end{Verbatim}
\end{onlyenv}

\vspace*{\baselineskip}

\begin{onlyenv}<2->
\textbf{Asynchronous functions:}
\begin{Verbatim}[fontsize=\scriptsize]
  var fs = require('fs');
  var fAsyncCalled = function(err, data) {
    if(err){
      console.log('Error during file retrieval!');
      return;
    }
  };
  fs.readFile('./cryptico.js','utf8', fAsyncCalled);
\end{Verbatim}
\end{onlyenv}
\end{frame}

\subsection{Program and Forget}

\subsection{setTimeout Example}
\frame[containsverbatim]{
\textbf{Why is this not going to work?}
	\vspace*{\baselineskip}
\begin{Verbatim}[fontsize=\scriptsize]
  for( var i = 0; i < 100; i++ ) {
    setTimeout( function() {
      console.log(i);
    }, 1000);
  }
\end{Verbatim}
}

\frame[containsverbatim]{
\textbf{Solution:}	
	\begin{Verbatim}[fontsize=\scriptsize]
  var fDelayed = function(id) {
    return function() {
      console.log(id);
    };
  };
  for( var i = 0; i < 100; i++ ) {
    setTimeout( fDelayed(i), 1000);
  }
	\end{Verbatim}
  Registers the value of \path{i} by value and not by reference in the anonyomous function which is returned on the first function call of \path{fDelayed(i)}.
}

\frame[containsverbatim]{
\textbf{(Almost) Real-life example:}	
	% \begin{Verbatim}[fontsize=\scriptsize]
  % function fetchUserObjectsAsync( arrNames, cbAnswer ){
  %   var semaphore = arrNames.length,
  %   objUsers = {},
  %   fGetUserAsync = function( name, cbLocal ){
  %   	db.getUser(name, cbLocal);
  %   },
  %   fJoin = function( uName ) {
  %     return function( err, obj ) {
  %       --semaphore
  %       if( err || !obj ) return;
  %       objUsers[ uName ] = obj;
  %       if( semaphore === 0 ){
  %         cbAnswer( null, objReplies );
  %       }
  %     }
  %   };
    
  %   for( var name in arrNames ){
  %     fGetUserAsync( user, fJoin( name ));
  %   }
  % }

\begin{Verbatim}[commandchars=\\\{\},fontsize=\scriptsize]
  \PY{k+kd}{function} \PY{n+nx}{fetchUserObjectsAsync}\PY{p}{(} \PY{n+nx}{arrNames}\PY{p}{,} \PY{n+nx}{cbAnswer} \PY{p}{)}\PY{p}{\PYZob{}}
    \PY{k+kd}{var} \PY{n+nx}{semaphore} \PY{o}{=} \PY{n+nx}{arrNames}\PY{p}{.}\PY{n+nx}{length}\PY{p}{,}
    \PY{n+nx}{objUsers} \PY{o}{=} \PY{p}{\PYZob{}}\PY{p}{\PYZcb{}}\PY{p}{,}
    \PY{n+nx}{fGetUserAsync} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{name}\PY{p}{,} \PY{n+nx}{cbLocal} \PY{p}{)}\PY{p}{\PYZob{}}
      \PY{n+nx}{db}\PY{p}{.}\PY{n+nx}{getUser}\PY{p}{(}\PY{n+nx}{name}\PY{p}{,} \PY{n+nx}{cbLocal}\PY{p}{)}\PY{p}{;}
    \PY{p}{\PYZcb{}}\PY{p}{,}
    \PY{n+nx}{fJoin} \PY{o}{=} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{uName} \PY{p}{)} \PY{p}{\PYZob{}}
      \PY{k}{return} \PY{k+kd}{function}\PY{p}{(} \PY{n+nx}{err}\PY{p}{,} \PY{n+nx}{obj} \PY{p}{)} \PY{p}{\PYZob{}}
        \PY{o}{\PYZhy{}\PYZhy{}}\PY{n+nx}{semaphore}
        \PY{k}{if}\PY{p}{(} \PY{n+nx}{err} \PY{o}{||} \PY{o}{!}\PY{n+nx}{obj} \PY{p}{)} \PY{k}{return}\PY{p}{;}
        \PY{n+nx}{objUsers}\PY{p}{[} \PY{n+nx}{uName} \PY{p}{]} \PY{o}{=} \PY{n+nx}{obj}\PY{p}{;}
        \PY{k}{if}\PY{p}{(} \PY{n+nx}{semaphore} \PY{o}{===} \PY{l+m+mi}{0} \PY{p}{)}\PY{p}{\PYZob{}}
          \PY{n+nx}{cbAnswer}\PY{p}{(} \PY{k+kc}{null}\PY{p}{,} \PY{n+nx}{objReplies} \PY{p}{)}\PY{p}{;}
        \PY{p}{\PYZcb{}}
      \PY{p}{\PYZcb{}}
    \PY{p}{\PYZcb{}}\PY{p}{;}
    
    \PY{k}{for}\PY{p}{(} \PY{k+kd}{var} \PY{n+nx}{name} \PY{k}{in} \PY{n+nx}{arrNames} \PY{p}{)}\PY{p}{\PYZob{}}
      \PY{n+nx}{fGetUserAsync}\PY{p}{(} \PY{n+nx}{user}\PY{p}{,} \PY{n+nx}{fJoin}\PY{p}{(} \PY{n+nx}{name} \PY{p}{)}\PY{p}{)}\PY{p}{;}
    \PY{p}{\PYZcb{}}
  \PY{p}{\PYZcb{}}
	\end{Verbatim}
}
\section{Everything is a Module in Node.js}
\frame{	
\begin{itemize}
	\item<1-> Load Modules via require:
	\begin{itemize}
	\item<2-> Built-in: \path{require('fs');}
	\item<3-> Project: \path{require('./my-module');}
	\end{itemize}
	\item<4-> Modules are cached!
\end{itemize}
}

\subsection{Built-in Modules}
\frame{
http://nodejs.org/api/
}

\subsection{Node Packaged Modules (NPM)}
\frame{
\begin{itemize}
	\item<1-> Url: https://www.npmjs.org/
	\item<2-> Everybody can publish to NPM!
	\item<3-> Global/Local/Project installation
\end{itemize}
}
\frame{
My Favorite: Project Installation\\
package.json\\
npm install\\
track version\\
Example of how peope still could break your roject: groc/jade\\
}
% \frame{
% \begin{figure}
% \includegraphics[scale=1]{node_modules2} 
% \caption{show an example picture}
% \end{figure}
% }

\subsection{Custom JS Modules}
\frame{
place index.js into node-modules - cryptico.js

}

\end{document}
